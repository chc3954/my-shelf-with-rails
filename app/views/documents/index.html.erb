<div class="min-h-screen bg-slate-50 text-slate-800 font-sans" data-controller="search">
  <!-- Navbar -->
  <nav class="bg-white border-b border-slate-200 sticky top-0 z-10 px-6 py-3 flex justify-between items-center shadow-sm">
    <div class="flex items-center space-x-3">
      <div class="bg-indigo-600 p-2 rounded-lg">
        <%= icon(:folder, "w-5 h-5 text-white") %>
      </div>
      <span class="text-xl font-bold text-slate-800 tracking-tight">my-shelf</span>
    </div>
    <div class="flex items-center space-x-4">
      <div class="hidden md:flex items-center bg-slate-100 rounded-lg px-3 py-1.5 border border-slate-200 focus-within:ring-2 focus-within:ring-indigo-500 focus-within:border-transparent transition-all">
        <%= icon(:search, "w-4 h-4 text-slate-400 mr-2") %>
        <input 
          type="text" 
          placeholder="Search files..." 
          class="bg-transparent border-none outline-none text-sm w-48 text-slate-700 placeholder-slate-400 focus:ring-0"
          data-search-target="input"
          data-action="input->search#filter"
        />
      </div>
      <%= button_to session_path, method: :delete, class: "flex items-center space-x-2 text-slate-500 hover:text-red-500 transition-colors text-sm font-medium px-3 py-1.5 rounded-lg hover:bg-red-50" do %>
        <%= icon(:log_out, "w-4 h-4") %>
        <span>Logout</span>
      <% end %>
    </div>
  </nav>
  <main class="max-w-7xl mx-auto p-6">
    <!-- Upload Area -->
    <%= form_with url: documents_path, multiple: true, data: { controller: "upload", action: "dragover->upload#dragOver dragleave->upload#dragLeave drop->upload#drop" } do |f| %>
      <%# In Rails, a file field with multiple: true generally sends an additional 'empty hidden input' by default, which results in a value of "". To completely disable this, you must add include_hidden: false %>
      <%= f.file_field :files, multiple: true, include_hidden: false, class: "hidden", data: { upload_target: "input", action: "change->upload#upload" } %>
      <div 
        class="relative group rounded-2xl border-2 border-dashed border-slate-300 bg-white hover:border-indigo-400 hover:bg-slate-50 transition-all duration-300 ease-in-out p-10 text-center mb-8 cursor-pointer shadow-sm"
        data-upload-target="area"
        data-action="click->upload#triggerInput"
        >
        <div class="flex flex-col items-center justify-center space-y-4">
          <div class="p-4 rounded-full bg-slate-100 text-slate-400 group-hover:bg-indigo-50 group-hover:text-indigo-500 transition-colors duration-300 icon-bg">
            <%= icon(:upload_cloud, "w-10 h-10") %>
          </div>
          <div>
            <p class="text-lg font-medium text-slate-700 drag-text">Drag & Drop files here</p>
            <p class="text-sm text-slate-400 mt-1">or click to browse your computer</p>
          </div>
        </div>
      </div>
    <% end %>
    <!-- File Grid (Turbo Frame) -->
    <%= turbo_frame_tag "documents_list" do %>
      <% if @documents.empty? %>
        <div class="text-center py-20 bg-white rounded-2xl border border-slate-200 shadow-sm">
          <div class="bg-slate-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4">
            <%= icon(:folder, "w-8 h-8 text-slate-300") %>
          </div>
          <h3 class="text-slate-600 font-medium">No files uploaded yet</h3>
          <p class="text-slate-400 text-sm mt-1">Upload files to safeguard them on my-shelf</p>
        </div>
      <% else %>
        <!-- File Stats -->
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-lg font-semibold text-slate-800 flex items-center">
            Your Files
            <%= render "documents/count" %>
          </h2>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
          <% @documents.each do |document| %>
            <%= render document %>
          <% end %>
        </div>
      <% end %>
    <% end %>
  </main>
</div>